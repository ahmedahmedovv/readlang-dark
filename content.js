let d=null,o=null;
chrome.runtime.onMessage.addListener((r,s,sr)=>{r.action==='focusMainContent'?f():r.action==='clearSelection'?c():0;sr({});return!0});
function f(){let e=document.getElementById('mainContent');if(!e){for(let t of document.querySelectorAll('div[id],div[class]')){let i=(t.id||'').toLowerCase(),n=(t.className||'').toLowerCase();if(i.includes('maincontent')||i.includes('main-content')||n.includes('maincontent')||n.includes('main-content')){s(t);return}}return}s(e)}
function s(e){d=e;if(o){o._c();o.remove()}o=document.createElement('div');Object.assign(o.style,{position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'#000',zIndex:999997,pointerEvents:'none'});u();document.body.appendChild(o);e.style.outline='2px solid #4CAF50';e.style.outlineOffset='2px';let w=()=>u(),h=()=>{window.removeEventListener('scroll',w);window.removeEventListener('resize',w);if(d)d.style.outline='';d.style.outlineOffset=''};window.addEventListener('scroll',w);window.addEventListener('resize',w);o._c=h}
function u(){let r=d.getBoundingClientRect(),s=window.scrollX,t=window.scrollY,l=r.left+s,b=r.top+t,w=r.width,h=r.height;o.style.clipPath=o.style.webkitClipPath=`polygon(0 0,0 100%,${l}px 100%,${l}px ${b}px,${l+w}px ${b}px,${l+w}px ${b+h}px,${l}px ${b+h}px,${l}px 100%,100% 100%,100% 0)`}
function c(){if(o){o._c();o.remove();o=null}if(d){d.style.outline='';d.style.outlineOffset='';d=null}}
